<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨ â¤ï¸</title>
  <style>
    :root{
      --bg:#0f0b10; --card:#1a121c; --muted:#cbd5e1; --text:#fff; --accent:#ff5fa2; --accent2:#ffd1e6;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .shell{max-width:900px;margin:auto;padding:20px}
    .nav{position:sticky;top:0;z-index:5;display:flex;gap:10px;align-items:center;background:rgba(26,18,28,.8);backdrop-filter:blur(8px);border-radius:16px;padding:10px 12px;border:1px solid #2c2430}
    .brand{font-weight:800;letter-spacing:.5px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-inline-start:auto}
    .tab{padding:10px 14px;border-radius:12px;border:1px solid #2c2430;background:#120c13;cursor:pointer}
    .tab.active{background:var(--accent);color:#12060a;border-color:transparent}
    .card{background:var(--card);border:1px solid #2c2430;border-radius:18px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .grid{display:grid;gap:14px}
    @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
    .muted{color:var(--muted)}
    .btn{cursor:pointer;border:0;background:var(--accent);color:#12060a;font-weight:800;padding:12px 16px;border-radius:12px}
    .btn.outline{background:#120c13;color:var(--text);border:1px solid #2c2430}
    .center{text-align:center}
    .hearts{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
    .heart{position:absolute;bottom:-40px;opacity:.85;animation:floatUp linear forwards}
    @keyframes floatUp{to{transform:translateY(-120vh) scale(1.2);opacity:0}}
    .pages{position:relative;margin-top:16px}
    .page{display:none}
    .page.active{display:block}
    .title{font-size:28px;margin:6px 0 12px}
    .kiss{filter:drop-shadow(0 8px 20px rgba(255,95,162,.35))}
    .footer{color:#9aa4b2;text-align:center;margin:28px 0}
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px}
    .gallery img{width:100%;border-radius:14px;border:1px solid #2c2430}
    .note{background:#120c13;border:1px dashed #2c2430;border-radius:12px;padding:12px;margin-top:10px}
    .type{min-height:48px;white-space:pre-wrap}
    .audioBar{display:flex;align-items:center;gap:10px;margin-top:8px}
    .inp{width:100%;padding:12px;border-radius:12px;border:1px solid #2c2430;background:#120c13;color:var(--text);outline:none}
    .row{display:grid;gap:10px}
    @media(min-width:640px){.row{grid-template-columns:1fr 1fr}}
    .chip{display:inline-flex;gap:6px;align-items:center;background:#120c13;border:1px solid #2c2430;border-radius:999px;padding:6px 10px}
    /* Ø²Ø± Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ */
    .btn-romantic{
      display:inline-block;background:#ff6ba6;color:#14060c;padding:10px 14px;border-radius:12px;font-weight:700;text-decoration:none
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div class="shell">
    <nav class="nav">
      <div class="brand">ğŸ’— Ø±Ø³Ø§Ù„Ø© Ù…Ù† <span id="yourNameChip">Ù…Ø­Ù…ÙˆØ¯</span> Ø¥Ù„Ù‰ <span id="herNameChip">Ø¥ÙŠÙ…Ø§Ù†</span></div>
      <div class="tabs">
        <button class="tab active" data-page="home">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="tab" data-page="memories">Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§</button>
        <button class="tab" data-page="play">Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ©</button>
        <button class="tab" data-page="message">Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        <a href="countdown.html" class="btn-romantic">ğŸ‚ Ø§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ ÙŠØ§ Ø¥ÙŠÙ…Ø§Ù† ğŸ’–</a>
      </div>
    </nav>

    <section class="pages">
      <!-- Ø§Ù„ØµÙØ­Ø© 1: Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
      <div class="page active" id="home">
        <div class="card">
          <h2 class="title">ÙŠØ§ <span id="herNameTitle">Ø­Ø¨ÙŠØ¨ØªÙŠ</span>ØŒ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³â€¦</h2>
          <p class="muted">Ø¹Ù…Ù„ØªÙ„Ùƒ Ø§Ù„ØµÙØ­Ø© Ø¯ÙŠ Ù…Ù† Ù‚Ù„Ø¨ÙŠ. ÙƒÙ„ Ø²Ø± ÙÙŠÙ‡Ø§ Ù…Ø¹Ù…ÙˆÙ„ Ø¹Ù„Ø´Ø§Ù† ÙŠØ±Ø³Ù… Ø¶Ø­ÙƒØ© Ø¨Ø¬Ø¯ ğŸ’–</p>

          <div class="grid">
            <div>
              <label class="muted">Ø§Ø³Ù…Ùƒ (ØªÙ‚Ø¯Ø±ÙŠ ØªØºÙŠÙ‘Ø±ÙŠÙ‡):</label>
              <input id="herNameInput" class="inp" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" />
              <div class="note">Ù„Ùˆ Ø³ÙŠØ¨ØªÙŠÙ‡ ÙØ§Ø¶ÙŠØŒ Ù‡Ø§Ù†Ù†Ø§Ø¯ÙŠÙƒÙŠ: <b>Ø¥ÙŠÙ…Ø§Ù†</b> ğŸ’</div>
            </div>
            <div>
              <label class="muted">Ø§Ø³Ù…ÙŠ Ø¹Ù†Ø¯ÙÙƒ ÙŠØ¸Ù‡Ø± Ø¥Ø²Ø§ÙŠØŸ</label>
              <input id="yourNameInput" class="inp" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù…Ø­Ù…ÙˆØ¯ Ù…Ø«Ù„Ø§Ù‹" />
            </div>
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="saveNames">Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
            <button class="btn outline" id="typeBtn">Ø´ÙˆÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠØ© âœ¨</button>
          </div>

          <div class="note type" id="typeArea"></div>

          <!-- Ø´Ø±ÙŠØ· Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù†Ø¸ÙŠÙ (ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù) -->
          <div class="audioBar">
            <button class="btn" id="playMusic">ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ğŸ¶</button>
            <button class="btn outline" id="pauseMusic">Ø¥ÙŠÙ‚Ø§Ù</button>
            <span class="chip">Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø®ÙÙŠÙØ©</span>
          </div>
          <audio id="bgAudio" preload="auto" playsinline loop>
            <!-- Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù…Ø³Ø§Ø± Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ù„Ù: Ù„Ùˆ ÙÙŠ Ù…Ø¬Ù„Ø¯ music Ø®Ù„ÙŠÙ‡ ÙƒØ¯Ù‡ -->
            <source src="music/our_song.mp3" type="audio/mpeg">
            Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ğŸµ
          </audio>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 2: Ø°ÙƒØ±ÙŠØ§Øª -->
      <div class="page" id="memories">
        <div class="card">
          <h2 class="title">Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§ Ø§Ù„Ø­Ù„ÙˆØ©</h2>
          <div class="gallery" id="gallery">
            <img src="images/1000036687.jpg" alt="Ø£Ù†Ø§ ÙˆØ¥ÙŠÙ…Ø§Ù† ğŸ’•">
            <img src="images/1000036697.jpg" alt="Ø°ÙƒØ±ÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø© â¤ï¸">
            <img src="images/1000036700.jpg" alt="Ø£Ø¬Ù…Ù„ ÙŠÙˆÙ… Ù…Ø¹ Ø¥ÙŠÙ…Ø§Ù† ğŸŒ¸">
            <img src="images/1000036703 (1).jpg" alt="Ø¶Ø­ÙƒØ© Ø¨ØªØºÙŠÙ‘Ø± Ø§Ù„ÙŠÙˆÙ… ğŸ˜">
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 3: Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ© -->
      <div class="page" id="play">
        <div class="card center">
          <h2 class="title">Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø¨Ø³ ğŸ˜Œ</h2>
          <p class="muted">Ù‡Ù„ Ù„Ø³Ù‡ Ø¨ØªØ­Ø¨ÙŠÙ†ÙŠØŸ</p>
          <div style="margin-top:10px; position:relative; height:120px">
            <button class="btn" id="yesBtn">Ø£ÙƒÙŠØ¯ Ø¨Ø­Ø¨Ùƒ ğŸ’˜</button>
            <button class="btn outline" id="noBtn" style="position:absolute; margin-inline-start:12px">Ù„Ø§ ğŸ™ˆ</button>
          </div>
          <div id="playOut" class="note"></div>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 4: Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
      <div class="page" id="message">
        <div class="card">
          <h2 class="title">Ù…Ù† Ù‚Ù„Ø¨ÙŠ Ù„ÙŠÙƒÙŠ</h2>
          <p id="finalMsg" class="muted" style="line-height:1.9"></p>
          <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
            <button class="btn outline" id="shareBtn">Ù…Ø´Ø§Ø±ÙƒØ©</button>
          </div>
        </div>
      </div>
    </section>

    <div class="footer">ØµÙÙ†Ø¹ Ø¨Ø­ÙØ¨ â€“ <span id="footerNames">Ù…Ø­Ù…ÙˆØ¯ â¤ Ø¥ÙŠÙ…Ø§Ù†</span></div>
  </div>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø³Ù…Ø§Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    let herName = 'Ø¥ÙŠÙ…Ø§Ù†';
    let yourName = 'Ù…Ø­Ù…ÙˆØ¯';

    const herNameInput = document.getElementById('herNameInput');
    const yourNameInput = document.getElementById('yourNameInput');
    const herNameTitle = document.getElementById('herNameTitle');
    const yourNameChip = document.getElementById('yourNameChip');
    const herNameChip = document.getElementById('herNameChip');
    const footerNames = document.getElementById('footerNames');

    document.getElementById('saveNames').addEventListener('click', () => {
      const h = (herNameInput.value || '').trim();
      const y = (yourNameInput.value || '').trim();
      herName = h || 'Ø¥ÙŠÙ…Ø§Ù†';
      yourName = y || 'Ù…Ø­Ù…ÙˆØ¯';
      herNameTitle.textContent = herName;
      yourNameChip.textContent = yourName;
      herNameChip.textContent = herName;
      footerNames.textContent = `${yourName} â¤ ${herName}`;
    });

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª
    const tabs = document.querySelectorAll('.tab');
    const pages = document.querySelectorAll('.page');
    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(b=>b.classList.remove('active')); t.classList.add('active');
      const id = t.dataset.page;
      pages.forEach(p => p.classList.toggle('active', p.id === id));
    }));

    // ÙƒØªØ§Ø¨Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ© (typewriter)
    const typeBtn = document.getElementById('typeBtn');
    const typeArea = document.getElementById('typeArea');
    typeBtn.addEventListener('click', () => {
      const txt = `\n${herName}â€¦\n\nØ­Ø§Ø³Ø³ Ø¥Ù† Ø§Ù„ÙƒÙ„Ø§Ù… Ø³Ø§Ø¹Ø§Øª Ø¨ÙŠÙ‚ÙØŒ Ø¨Ø³ Ø§Ù„Ù‚Ù„Ø¨ Ø¹Ù…Ø±Ù‡ Ù…Ø§ Ø³ÙƒØª.\nØ¹Ù…Ù„ØªÙ„Ùƒ Ø§Ù„ØµÙØ­Ø© Ø¯ÙŠ Ø¹Ù„Ø´Ø§Ù† Ø£Ù‚ÙˆÙ„Ùƒ: Ø¥Ù†ØªÙ Ø§Ù„ØºØ§Ù„ÙŠØ©ØŒ ÙˆØ¥Ù†ØªÙ Ø§Ù„Ø¨ÙŠØªØŒ\nÙˆÙ„Ùˆ Ø²Ø¹Ù„Ù†Ø§ ÙŠÙˆÙ…ØŒ Ø£Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ø´Ø§Ù† Ø£ØµÙ„Ù‘Ø­ ÙˆØ£Ø­Ø§ÙˆÙ„ ØªØ§Ù†ÙŠ. ğŸ’–`;
      typeArea.textContent = '';
      let i=0; const timer=setInterval(()=>{typeArea.textContent += txt[i]||''; i++; if(i>txt.length) clearInterval(timer);}, 28);
    });

    // Ù…ÙˆØ³ÙŠÙ‚Ù‰ (ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù) â€” ØªÙ†ÙÙŠØ° ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
    const audio = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playMusic');
    const pauseBtn = document.getElementById('pauseMusic');
    audio.volume = 1.0;

    playBtn.addEventListener('click', async () => {
      try { await audio.play(); }
      catch(e){ alert('Ù…Ø´ Ù‚Ø§Ø¯Ø± ÙŠØ´ØºÙ‘Ù„ Ø§Ù„ØµÙˆØª. Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù: music/our_song.mp3'); }
    });
    pauseBtn.addEventListener('click', () => audio.pause());

    // Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ©: Ø²Ø± "Ù„Ø§" ÙŠØ²ÙˆØº
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const playOut= document.getElementById('playOut');

    noBtn.addEventListener('mouseenter', () => {
      const area = noBtn.parentElement.getBoundingClientRect();
      const x = Math.random() * (area.width - noBtn.offsetWidth);
      const y = Math.random() * (area.height - noBtn.offsetHeight);
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });
    yesBtn.addEventListener('click', ()=>{ playOut.textContent = `ØªÙ…Ø§Ù… ÙŠØ§ ${herName}ØŒ Ø§Ù„Ø¬ÙˆØ§Ø¨ Ù…Ø¹Ø±ÙˆÙ Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªØ³Ø£Ù„ÙŠ ğŸ’˜`; });

    // Ø±Ø³Ø§Ù„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ©
    const finalMsg = document.getElementById('finalMsg');
    function renderFinal(){
      finalMsg.textContent = `${herName} Ø§Ù„Ø¹Ø²ÙŠØ²Ø©ØŒ\n\nØ£Ø¹Ø±Ù Ø¥Ù† Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù„ÙŠ ÙØ§ØªØª ÙƒØ§Ù†Øª ØªÙ‚ÙŠÙ„Ø©ØŒ ÙˆÙŠÙ…ÙƒÙ† Ø§Ù„ÙƒÙ„Ø§Ù… Ø§ØªÙ„Ø®Ø¨Ø· Ù…Ù†Ù†Ø§ØŒ\nØ¨Ø³ Ø£Ù†Ø§ Ø­Ø§Ø¨Ø¨ Ø£Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©ØŒ Ø¨Ø¥ÙŠØ¯ ÙÙŠ Ø¥ÙŠØ¯.\nÙ„Ùˆ ÙÙŠ Ù‚Ù„Ø¨Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„ÙØ±ØµØ© ØªØ§Ù†ÙŠØ©ØŒ Ø£Ù†Ø§ Ù…Ø³ØªØ¹Ø¯ Ø£ØµÙ†Ø¹Ù‡Ø§ Ø£Ø­Ù„Ù‰ ÙØ±ØµØ©.\n\nÙ…Ø®Ù„Øµ Ø¯Ø§Ø¦Ù…Ù‹Ø§ØŒ\n${yourName}`;
    }
    renderFinal();

    // Ù†Ø³Ø® ÙˆÙ…Ø´Ø§Ø±ÙƒØ©
    document.getElementById('copyBtn').addEventListener('click', async()=>{
      try{await navigator.clipboard.writeText(finalMsg.textContent); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© ğŸ’Œ');}
      catch{alert('Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø§Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ â€“ Ø§Ù†Ø³Ø®Ù‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„Ùˆ Ø³Ù…Ø­Øª.');}
    });
    document.getElementById('shareBtn').addEventListener('click', async()=>{
      const text = finalMsg.textContent;
      if(navigator.share){ try{await navigator.share({text});}catch(e){} }
      else{ alert('Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© â€” Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¨Ø¹ØªÙ‡Ø§ ğŸ’Œ'); }
    });

    // Ù‚Ù„ÙˆØ¨ Ù…ØªØ·Ø§ÙŠØ±Ø©
    const hearts = document.getElementById('hearts');
    function spawnHeart(){
      const d = document.createElement('div');
      d.className='heart';
      const size = 12 + Math.random()*24;
      d.style.left = Math.random()*100+'%';
      d.style.width = size+'px';
      d.style.height = size+'px';
      d.style.animationDuration = 5 + Math.random()*6 + 's';
      d.style.color = 'var(--accent)';
      d.innerHTML = 'â¤';
      hearts.appendChild(d);
      setTimeout(()=>d.remove(), 12000);
    }
    setInterval(spawnHeart, 600);

    // ÙØ­ÙˆØµØ§Øª Ø¨Ø³ÙŠØ·Ø©
    console.groupCollapsed('Self-tests');
    try {
      console.assert(typeof herName === 'string', 'herName should be string');
      console.assert(document.getElementById('hearts') === hearts, 'hearts reference OK');
      console.assert(typeof spawnHeart === 'function', 'spawnHeart is defined');
      console.log('âœ… Music wired once, IDs unique, ready.');
    } catch (e) { console.warn('Self-test issue:', e); }
    console.groupEnd();
  </script>
</body>
</html>
