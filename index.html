<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨ â¤ï¸</title>
  <style>
    :root{
      --bg:#0f0b10; --card:#1a121c; --muted:#cbd5e1; --text:#fff;
      --accent:#ff5fa2; --accent2:#ffd1e6; --outline:#2c2430;
      --good:#6ee7b7; --warn:#fca5a5; --gold:#ffd166;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .shell{max-width:900px;margin:auto;padding:20px}
    .nav{position:sticky;top:0;z-index:5;display:flex;gap:10px;align-items:center;background:rgba(26,18,28,.8);backdrop-filter:blur(8px);border-radius:16px;padding:10px 12px;border:1px solid var(--outline)}
    .brand{font-weight:800;letter-spacing:.5px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-inline-start:auto}

    /* Ø£Ø²Ø±Ø§Ø± Ù…ÙˆØ­Ù‘Ø¯Ø© ÙˆÙˆØ§Ø¶Ø­Ø© */
    .tab, .btn{
      padding:10px 14px;border-radius:12px;border:1px solid var(--outline);
      background:#120c13;cursor:pointer;color:#fff;font-weight:800;letter-spacing:.2px;
      text-shadow:0 1px 0 rgba(0,0,0,.5); transition:transform .15s, box-shadow .15s, background .2s;
      box-shadow:0 4px 10px rgba(0,0,0,.25);
      display:inline-flex;align-items:center;gap:8px;
    }
    .tab:hover,.btn:hover{transform:translateY(-1px);box-shadow:0 6px 14px rgba(0,0,0,.35)}
    .tab.active{background:var(--accent);color:#12060a;border-color:transparent;text-shadow:none}
    .btn{background:linear-gradient(180deg, #ff7bb6, #ff5fa2); color:#12060a; border:none}
    .btn.outline{background:#120c13;color:#fff;border:1px solid var(--outline)}
    .btn.good{background:linear-gradient(180deg,#7ef0c4,#32d49b);color:#0a1210}
    .btn.warn{background:linear-gradient(180deg,#ffc7c7,#ff9b9b);color:#2b0a0a}

    .card{background:var(--card);border:1px solid var(--outline);border-radius:18px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .grid{display:grid;gap:14px}
    @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
    .muted{color:var(--muted)}
    .center{text-align:center}
    .hearts{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
    .heart{position:absolute;bottom:-40px;opacity:.85;animation:floatUp linear forwards}
    @keyframes floatUp{to{transform:translateY(-120vh) scale(1.2);opacity:0}}
    .pages{position:relative;margin-top:16px}
    .page{display:none}
    .page.active{display:block}
    .title{font-size:28px;margin:6px 0 12px}
    .footer{color:#9aa4b2;text-align:center;margin:28px 0}
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px}
    .gallery img{width:100%;border-radius:14px;border:1px solid var(--outline)}

    .note{background:#120c13;border:1px dashed var(--outline);border-radius:12px;padding:12px;margin-top:10px}
    .type{min-height:48px;white-space:pre-wrap}
    .audioBar{display:flex;align-items:center;gap:10px;margin-top:8px;flex-wrap:wrap}
    .inp{width:100%;padding:12px;border-radius:12px;border:1px solid var(--outline);background:#120c13;color:var(--text);outline:none}
    .row{display:grid;gap:10px}
    @media(min-width:640px){.row{grid-template-columns:1fr 1fr}}
    .chip{display:inline-flex;gap:6px;align-items:center;background:#120c13;border:1px solid var(--outline);border-radius:999px;padding:6px 10px}

    /* Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© */
    .count{display:grid;grid-template-columns:repeat(4, minmax(0,1fr));gap:12px;margin:16px 0 6px}
    .unit{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:16px 12px;text-align:center}
    .num{font-size:clamp(28px,6vw,48px);font-weight:800;letter-spacing:1px}
    .lab{font-size:12px;opacity:.9;margin-top:4px}
    @media (max-width:520px){.count{grid-template-columns:repeat(2, minmax(0,1fr))}}

    /* Ù…Ø¤Ø«Ø±Ø§Øª Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ */
    #bdayFx{position:fixed;inset:0;pointer-events:none;z-index:-1}
    .cake{position:absolute;bottom:-40px;font-size:clamp(22px,4vw,34px);opacity:.9;animation:rise var(--dur) linear forwards;filter:drop-shadow(0 2px 8px rgba(0,0,0,.35))}
    @keyframes rise{to{transform:translateY(-120vh) rotate(10deg);opacity:0}}

    .candles{position:fixed;left:0;right:0;bottom:6px;height:80px;display:flex;justify-content:center;gap:18px;pointer-events:none;z-index:-1}
    .candle{position:relative;width:10px;height:60px;background:linear-gradient(#ffd4e9,#ffb2d6);border-radius:6px;border:1px solid rgba(255,255,255,.2);box-shadow:0 2px 10px rgba(0,0,0,.35) inset, 0 4px 12px rgba(0,0,0,.2)}
    .flame{position:absolute;top:-18px;left:50%;transform:translateX(-50%);width:14px;height:20px;background:radial-gradient(closest-side, #fff7a8 35%, #ffae00 60%, rgba(255,174,0,.0) 70%);border-radius:50% 50% 50% 50%;filter:drop-shadow(0 0 8px rgba(255,209,102,.9))}
    .flame::after{content:"";position:absolute;inset:0;animation:flick .8s infinite alternate ease-in-out}
    @keyframes flick{
      0%{transform:translate(-1px,1px) scale(1)}
      100%{transform:translate(2px,-1px) scale(1.08)}
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div id="bdayFx" hidden></div>

  <div class="shell">
    <nav class="nav">
      <div class="brand">ğŸ’— Ø±Ø³Ø§Ù„Ø© Ù…Ù† <span id="yourNameChip">Ù…Ø­Ù…ÙˆØ¯</span> Ø¥Ù„Ù‰ <span id="herNameChip">Ø¥ÙŠÙ…Ø§Ù†</span></div>
      <div class="tabs">
        <button class="tab active" data-page="home">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="tab" data-page="memories">ğŸ“¸ Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§</button>
        <button class="tab" data-page="play">ğŸ® Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ©</button>
        <button class="tab" data-page="message">ğŸ’Œ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        <button class="tab" data-page="birthday">ğŸ‚ Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</button>
      </div>
    </nav>

    <section class="pages">
      <!-- Ø§Ù„ØµÙØ­Ø© 1: Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
      <div class="page active" id="home">
        <div class="card">
          <h2 class="title">ÙŠØ§ <span id="herNameTitle">Ø­Ø¨ÙŠØ¨ØªÙŠ</span>ØŒ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³â€¦</h2>
          <p class="muted"> Ø³Ù‡Ø±Øª Ù„ÙŠØ§Ù„ÙŠ Ø¹Ù„Ø´Ø§Ù† Ø§Ø¹Ù…Ù„Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¯Ø§ Ù…Ù† ÙŠÙˆÙ… Ù…Ø§ØªØµÙˆØ±Ù†Ø§ Ø³ÙˆØ§ ÙÙŠ Ø§Ù„ÙØ±Ø­ ğŸ’–</p>

          <div class="grid">
            <div>
              <label class="muted">Ø§Ø³Ù…Ùƒ (Ø£Ù†Ø§ Ø¨Ø­Ø¨Ù‡ Ù…Ù†ÙˆÙ† ğŸ¥°ğŸ˜˜ğŸ¥° ):</label>
              <input id="herNameInput" class="inp" placeholder=" Ø¨Øª Ù‚ÙˆÙ„ØªÙ„Ùƒ Ø¨Ø­Ø¨Ù‡ Ù…Ù†ÙˆÙ† Ù‡Ø§ " />
              <div class="note"> ğŸ¤£ğŸ¤£ ÙƒØ¯Ø§ ÙƒØ¯Ø§ Ø§Ù†Ø§ Ø§Ù„ÙŠ Ø¨Ø±Ù…Ø¬Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆÙ‡Ø®Ù„ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙŠÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¥Ø³Ù… Ù…Ù†ÙˆÙ† Ù„Ùˆ Ù…ÙƒØªØ¨ØªÙŠØ´ Ø§Ø³Ù… ØªØ§Ù†ÙŠ Ø£Ø­Ù„ÙŠ  : <b> Ù…Ù†ÙˆÙ† </b> ğŸ’</div>
            </div>
            <div>
              <label class="muted">Ø§Ø³Ù…ÙŠ Ø¹Ù†Ø¯ÙÙƒ ÙŠØ¸Ù‡Ø± Ø¥Ø²Ø§ÙŠØŸ</label>
              <input id="yourNameInput" class="inp" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù…Ø­Ù…ÙˆØ¯ Ù…Ø«Ù„Ø§Ù‹" />
            </div>
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn good" id="saveNames">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
            <button class="btn outline" id="typeBtn">âœ¨ Ø´ÙˆÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠØ©</button>
          </div>

          <div class="note type" id="typeArea"></div>

          <!-- Ø´Ø±ÙŠØ· Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->
          <div class="audioBar">
            <button class="btn" id="playMusic">ğŸµ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
            <button class="btn outline" id="pauseMusic">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
            <span class="chip">Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø®ÙÙŠÙØ©</span>
          </div>
          <audio id="bgAudio" preload="auto" playsinline loop>
            <source src="music/our_song.mp3" type="audio/mpeg">
            Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ğŸµ
          </audio>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 2: Ø°ÙƒØ±ÙŠØ§Øª -->
      <div class="page" id="memories">
        <div class="card">
          <h2 class="title">ğŸ“¸ Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§ Ø§Ù„Ø­Ù„ÙˆØ©</h2>
          <div class="gallery" id="gallery">
            <img src="images/1000036687.jpg" alt="Ø£Ù†Ø§ ÙˆØ¥ÙŠÙ…Ø§Ù† ğŸ’•">
            <img src="images/1000036697.jpg" alt="Ø°ÙƒØ±ÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø© â¤ï¸">
            <img src="images/1000036700.jpg" alt="Ø£Ø¬Ù…Ù„ ÙŠÙˆÙ… Ù…Ø¹ Ø¥ÙŠÙ…Ø§Ù† ğŸŒ¸">
            <img src="images/1000036703 (1).jpg" alt="Ø¶Ø­ÙƒØ© Ø¨ØªØºÙŠÙ‘Ø± Ø§Ù„ÙŠÙˆÙ… ğŸ˜">
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 3: Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ© -->
      <div class="page" id="play">
        <div class="card center">
          <h2 class="title">ğŸ® Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø¨Ø³ ğŸ˜Œ</h2>
          <p class="muted">Ù‡Ù„ Ù„Ø³Ù‡ Ø¨ØªØ­Ø¨ÙŠÙ†ÙŠØŸ</p>
          <div style="margin-top:10px; position:relative; height:120px">
            <button class="btn good" id="yesBtn">â¤ï¸ Ø£ÙƒÙŠØ¯ Ø¨Ø­Ø¨Ùƒ</button>
            <button class="btn warn" id="noBtn" style="position:absolute; margin-inline-start:12px">ğŸ™ˆ Ù„Ø§</button>
          </div>
          <div id="playOut" class="note"></div>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 4: Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
      <div class="page" id="message">
        <div class="card">
          <h2 class="title">ğŸ’Œ Ù…Ù† Ù‚Ù„Ø¨ÙŠ Ù„ÙŠÙƒÙŠ</h2>
          <p id="finalMsg" class="muted" style="line-height:1.9"></p>
          <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" id="copyBtn">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
            <button class="btn outline" id="shareBtn">ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©</button>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ØµÙØ­Ø© 5: Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (Ø§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©) -->
      <div class="page" id="birthday">
        <div class="card center">
          <h2 class="title">ğŸ‚ Ø§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ <span id="herNameInBday">Ø¥ÙŠÙ…Ø§Ù†</span></h2>
          <p class="muted">Ø¨Ù†Ø³ØªÙ†Ù‰ Ø§Ù„ÙŠÙˆÙ… Ø¯Ù‡ Ø¹Ù„Ù‰ Ù†Ø§Ø± ğŸ•¯ï¸ğŸ’–</p>

          <div class="count" aria-live="polite">
            <div class="unit"><div class="num" id="d">â€”</div><div class="lab">Ø£ÙŠØ§Ù…</div></div>
            <div class="unit"><div class="num" id="h">â€”</div><div class="lab">Ø³Ø§Ø¹Ø§Øª</div></div>
            <div class="unit"><div class="num" id="m">â€”</div><div class="lab">Ø¯Ù‚Ø§ÙŠÙ‚</div></div>
            <div class="unit"><div class="num" id="s">â€”</div><div class="lab">Ø«ÙˆØ§Ù†ÙŠ</div></div>
          </div>

          <div class="note">Ø§Ù„Ø¹ÙØ¯Ù‘ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø£Ù‚Ø±Ø¨ <b>17 ÙŠÙˆÙ†ÙŠÙˆ</b> â€” Ø£ÙˆÙ„ Ù…Ø§ ÙŠÙˆØµÙ„ Ù„Ù„ØµÙØ± Ù‡ØªØ´ØªØºÙ„ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© ğŸ‰</div>
        </div>
      </div>
    </section>

    <div class="footer">ØµÙÙ†Ø¹ Ø¨Ø­ÙØ¨ â€“ <span id="footerNames">Ù…Ø­Ù…ÙˆØ¯ â¤ Ù…Ù†ÙˆÙ†</span></div>
  </div>

  <script>
    // ===== Ø£Ø³Ù…Ø§Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø­Ø³Ø¨ ÙƒÙ„Ø§Ù…Ùƒ =====
    let herName = 'Ù…Ù†ÙˆÙ†';
    let yourName = 'Ù…Ø­Ù…ÙˆØ¯';

    const herNameInput = document.getElementById('herNameInput');
    const yourNameInput = document.getElementById('yourNameInput');
    const herNameTitle = document.getElementById('herNameTitle');
    const yourNameChip = document.getElementById('yourNameChip');
    const herNameChip  = document.getElementById('herNameChip');
    const footerNames  = document.getElementById('footerNames');
    const herNameInBday= document.getElementById('herNameInBday');

    document.getElementById('saveNames').addEventListener('click', () => {
      const h = (herNameInput.value || '').trim();
      const y = (yourNameInput.value || '').trim();
      herName = h || 'Ù…Ù†ÙˆÙ†';
      yourName = y || 'Ù…Ø­Ù…ÙˆØ¯';
      [herNameTitle, herNameChip, herNameInBday].forEach(el=> el.textContent = herName);
      yourNameChip.textContent = yourName;
      footerNames.textContent = `${yourName} â¤ ${herName}`;
    });

    // ===== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª Ù…Ø¹ ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ù…Ø¤Ø«Ø±Ø§Øª Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ =====
    const tabs  = document.querySelectorAll('.tab');
    const pages = document.querySelectorAll('.page');
    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(b=>b.classList.remove('active')); t.classList.add('active');
      const id = t.dataset.page;
      pages.forEach(p => p.classList.toggle('active', p.id === id));
      if(id === 'birthday'){ startBirthdayFX(); startCountdown(); }
      else { stopBirthdayFX(); }
    }));

    // ===== ÙƒØªØ§Ø¨Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ© =====
    const typeBtn = document.getElementById('typeBtn');
    const typeArea = document.getElementById('typeArea');
    typeBtn.addEventListener('click', () => {
      const txt = `\n${herName}â€¦\n\nØ­Ø§Ø³Ø³ Ø¥Ù† Ø§Ù„ÙƒÙ„Ø§Ù… Ø³Ø§Ø¹Ø§Øª Ø¨ÙŠÙ‚ÙØŒ Ø¨Ø³ Ø§Ù„Ù‚Ù„Ø¨ Ø¹Ù…Ø±Ù‡ Ù…Ø§ Ø³ÙƒØª.\nØ¹Ù…Ù„ØªÙ„Ùƒ Ø§Ù„ØµÙØ­Ø© Ø¯ÙŠ Ø¹Ù„Ø´Ø§Ù† Ø£Ù‚ÙˆÙ„Ùƒ: Ø¥Ù†ØªÙ Ø§Ù„ØºØ§Ù„ÙŠØ©ØŒ ÙˆØ¥Ù†ØªÙ Ø§Ù„Ø¨ÙŠØªØŒ\nÙˆÙ„Ùˆ Ø²Ø¹Ù„Ù†Ø§ ÙŠÙˆÙ…ØŒ Ø£Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ø´Ø§Ù† Ø£ØµÙ„Ù‘Ø­ ÙˆØ£Ø­Ø§ÙˆÙ„ ØªØ§Ù†ÙŠ. ğŸ’–`;
      typeArea.textContent = '';
      let i=0; const timer=setInterval(()=>{typeArea.textContent += txt[i]||''; i++; if(i>txt.length) clearInterval(timer);}, 28);
    });

    // ===== Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù =====
    const audio   = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playMusic');
    const pauseBtn= document.getElementById('pauseMusic');
    audio.volume = 1.0;
    playBtn.addEventListener('click', async () => { try{ await audio.play(); }catch(e){ alert('Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù: music/our_song.mp3'); }});
    pauseBtn.addEventListener('click', () => audio.pause());

    // ===== Ù„Ø¹Ø¨Ø© Ù„Ø·ÙŠÙØ© =====
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const playOut= document.getElementById('playOut');
    noBtn.addEventListener('mouseenter', () => {
      const area = noBtn.parentElement.getBoundingClientRect();
      const x = Math.random() * (area.width - noBtn.offsetWidth);
      const y = Math.random() * (area.height - noBtn.offsetHeight);
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });
    yesBtn.addEventListener('click', ()=>{ playOut.textContent = `ØªÙ…Ø§Ù… ÙŠØ§ ${herName}ØŒ Ø§Ù„Ø¬ÙˆØ§Ø¨ Ù…Ø¹Ø±ÙˆÙ Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªØ³Ø£Ù„ÙŠ ğŸ’˜`; });

    // ===== Ø±Ø³Ø§Ù„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© =====
    const finalMsg = document.getElementById('finalMsg');
    function renderFinal(){
      finalMsg.textContent = `${herName} Ø§Ù„Ø¹Ø²ÙŠØ²Ø©ØŒ\n\nØ£Ø¹Ø±Ù Ø¥Ù† Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù„ÙŠ ÙØ§ØªØª ÙƒØ§Ù†Øª ØªÙ‚ÙŠÙ„Ø©ØŒ ÙˆÙŠÙ…ÙƒÙ† Ø§Ù„ÙƒÙ„Ø§Ù… Ø§ØªÙ„Ø®Ø¨Ø· Ù…Ù†Ù†Ø§ØŒ\nØ¨Ø³ Ø£Ù†Ø§ Ø­Ø§Ø¨Ø¨ Ø£Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©ØŒ Ø¨Ø¥ÙŠØ¯ ÙÙŠ Ø¥ÙŠØ¯.\nÙ„Ùˆ ÙÙŠ Ù‚Ù„Ø¨Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„ÙØ±ØµØ© ØªØ§Ù†ÙŠØ©ØŒ Ø£Ù†Ø§ Ù…Ø³ØªØ¹Ø¯ Ø£ØµÙ†Ø¹Ù‡Ø§ Ø£Ø­Ù„Ù‰ ÙØ±ØµØ©.\n\nÙ…Ø®Ù„Øµ Ø¯Ø§Ø¦Ù…Ù‹Ø§ØŒ\n${yourName}`;
    }
    renderFinal();

    document.getElementById('copyBtn').addEventListener('click', async()=>{
      try{await navigator.clipboard.writeText(finalMsg.textContent); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© ğŸ’Œ');}
      catch{alert('Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø§Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ â€“ Ø§Ù†Ø³Ø®Ù‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„Ùˆ Ø³Ù…Ø­Øª.');}
    });
    document.getElementById('shareBtn').addEventListener('click', async()=>{
      const text = finalMsg.textContent;
      if(navigator.share){ try{await navigator.share({text});}catch(e){} }
      else{ alert('Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© â€” Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¨Ø¹ØªÙ‡Ø§ ğŸ’Œ'); }
    });

    // ===== Ù‚Ù„ÙˆØ¨ Ø¹Ø§Ù…Ø© (Ø®Ù„ÙÙŠØ©) =====
    const hearts = document.getElementById('hearts');
    function spawnHeart(){
      const d = document.createElement('div');
      d.className='heart';
      const size = 12 + Math.random()*24;
      d.style.left = Math.random()*100+'%';
      d.style.width = size+'px'; d.style.height = size+'px';
      d.style.animationDuration = 5 + Math.random()*6 + 's';
      d.style.color = 'var(--accent)';
      d.innerHTML = 'â¤';
      hearts.appendChild(d);
      setTimeout(()=>d.remove(), 12000);
    }
    setInterval(spawnHeart, 600);

    // ===== Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© + Ù…Ø¤Ø«Ø±Ø§Øª Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ =====
    const TARGET_MM = 6, TARGET_DD = 17; // ÙŠÙˆÙ†ÙŠÙˆ = 6
    let countdownTimer = null;
    function nextTarget(){
      const now = new Date();
      let y = now.getFullYear();
      let t = new Date(y, TARGET_MM-1, TARGET_DD, 0,0,0,0);
      if (t <= now) t = new Date(y+1, TARGET_MM-1, TARGET_DD, 0,0,0,0);
      return t;
    }
    function startCountdown(){
      const dEl = document.getElementById('d');
      const hEl = document.getElementById('h');
      const mEl = document.getElementById('m');
      const sEl = document.getElementById('s');
      const target = nextTarget();

      function tick(){
        const now = new Date();
        let diff = target - now;
        if (diff <= 0){
          dEl.textContent = hEl.textContent = mEl.textContent = sEl.textContent = '0';
          celebrateBirthday(); // Ù…ÙØ§Ø¬Ø£Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ±
          clearInterval(countdownTimer);
          return;
        }
        const totalSec = Math.floor(diff/1000);
        const days  = Math.floor(totalSec/86400);
        const hours = Math.floor((totalSec%86400)/3600);
        const mins  = Math.floor((totalSec%3600)/60);
        const secs  = totalSec%60;
        dEl.textContent = days;
        hEl.textContent = String(hours).padStart(2,'0');
        mEl.textContent = String(mins).padStart(2,'0');
        sEl.textContent = String(secs).padStart(2,'0');
      }
      if(countdownTimer) clearInterval(countdownTimer);
      tick(); countdownTimer = setInterval(tick, 1000);
    }

    // Ù…Ø¤Ø«Ø±Ø§Øª: ØªÙˆØ±ØªØ© ØªØ·ÙŠØ± + Ø´Ù…ÙˆØ¹ Ù‚Ø§Ø¹ Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø¯Ø®ÙˆÙ„ ØªØ¨ÙˆÙŠØ¨ Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
    const fxHost = document.getElementById('bdayFx');
    let cakeTimer = null;
    function startBirthdayFX(){
      fxHost.hidden = false;
      // Ø´Ù…ÙˆØ¹
      const candles = document.createElement('div');
      candles.className = 'candles';
      for(let i=0;i<12;i++){
        const c = document.createElement('div'); c.className='candle';
        const f = document.createElement('div'); f.className='flame';
        c.appendChild(f); candles.appendChild(c);
      }
      fxHost.appendChild(candles);
      // ØªÙˆØ±ØªØ© ØªØ·ÙŠØ±
      function spawnCake(){
        const e = document.createElement('div');
        e.className = 'cake';
        e.style.left = (5 + Math.random()*90) + 'vw';
        e.style.setProperty('--dur', (6+Math.random()*8)+'s');
        e.textContent = 'ğŸ‚';
        fxHost.appendChild(e);
        setTimeout(()=>e.remove(), 15000);
      }
      for(let i=0;i<6;i++) spawnCake();
      cakeTimer = setInterval(spawnCake, 900);
    }
    function stopBirthdayFX(){
      fxHost.hidden = true;
      if(cakeTimer) { clearInterval(cakeTimer); cakeTimer = null; }
      while(fxHost.firstChild) fxHost.removeChild(fxHost.firstChild);
    }

    // Ù…ÙØ§Ø¬Ø£Ø© Ø¨Ø³ÙŠØ·Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ± (ÙˆÙ…ÙŠØ¶ Ø°Ù‡Ø¨ÙŠ)
    function celebrateBirthday(){
      const flash = document.createElement('div');
      flash.style.position='fixed'; flash.style.inset='0';
      flash.style.background='radial-gradient(circle at 50% 50%, rgba(255,209,102,.7), rgba(255,209,102,0))';
      flash.style.pointerEvents='none'; flash.style.animation='fade 1.2s ease-out forwards';
      flash.style.zIndex='2';
      document.body.appendChild(flash);
      const style = document.createElement('style');
      style.textContent='@keyframes fade{from{opacity:1}to{opacity:0}}';
      document.head.appendChild(style);
      setTimeout(()=>flash.remove(), 1400);
    }

    // ÙØ­ÙˆØµØ§Øª Ø¨Ø³ÙŠØ·Ø©
    console.groupCollapsed('Self-tests');
    try {
      console.assert(typeof herName === 'string', 'herName should be string');
      console.log('âœ… Ready. Countdown in-page. Music persists. Buttons unified.');
    } catch (e) { console.warn('Self-test issue:', e); }
    console.groupEnd();
  </script>
</body>
</html>
